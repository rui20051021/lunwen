# 基于Hadoop的生鲜农产品配送监测预警系统  
（文档内容整理：系统功能与实现方式）

> 说明：以下为根据开题报告梳理的“系统需要实现的功能”和“实现方式/技术路线”。

---

## 一、系统要实现的功能

### 1. 多角色业务协同（前台）
- **多角色注册与登录**：供应商、物流商、采购商、监管员四类账号体系。  
- **订单全流程管理**：订单创建与状态流转（创建→配送中→签收/异常），并支持轨迹实时跟踪（起止点、车辆位置更新）。  
- **配送详情可视化**：展示车辆/司机信息、预计 vs 实际到达时间对比、预警事件实时提示（超时/温控异常/路径偏离）。  
- **数据分析报告（面向业务决策）**：  
  - 时效分析：平均配送时长、延迟订单占比  
  - 损耗分析：温控失效与货损率关联  
  - 预警统计：三类预警触发频率、处理效率汇总  
- **智能预警处理（闭环）**：实时接收预警消息，并在线提交处理反馈。

### 2. 管控与治理能力（后台）
- **管理员登录入口**（独立后台）。  
- **用户与权限管理（RBAC + 数据隔离）**：四类角色增删改查、分级授权（如供应商仅管理自家订单）。  
- **动态预警规则配置（可运营化）**：  
  - 超时规则：按路线设置最大延迟容忍时长  
  - 温控规则：按农产品类型设定温湿度区间  
  - 路径规则：设置电子围栏偏离半径  
- **预警事件审计**：查历史预警记录（时间/类型/处理人），追踪处理全流程（响应时长/处理结果）。  
- **基础数据管理**：车辆库（绑定冷链设备、监控温湿度）、司机库（资质有效期预警）、路线库（预设路径坐标与里程）。

### 3. 核心预警场景
- **秒级预警**三类：**超时、温控、路径偏离**，并支持路径偏离的动态纠偏/纠正。

---

## 二、系统实现方式（技术路线/架构与数据流）

### 1. 总体分层架构（从采集到应用）
- **前端层**：Vue.js 多角色界面与可视化看板。  
- **后端层**：Spring Boot + MyBatis + MySQL，落地 RBAC 权限模型与业务数据管理。  
- **实时层**：Kafka 接收传感器数据流；WebSocket 向前端推送预警消息。  
- **计算层**：Spark SQL 做时效指标分析；MapReduce 做批量损耗关联计算。  
- **存储层**：HDFS 存历史传感器数据；Redis 缓存车辆实时位置等高频数据。

### 2. 数据采集与流转链路（按“事件流”组织）
- **传感器/定位数据采集**：  
  - 温湿度传感器（4G/5G 上报）→ Kafka  
  - 车载 GPS 回传 → 电子围栏/路线匹配  
- **实时预警引擎**：采用 Flink 做实时预警计算，实现多场景秒级报警。  
- **状态闭环**：预警消息通过 WebSocket 推送到前端，业务人员在线反馈处理结果，形成可审计链路。

### 3. 预警判定逻辑（规则 + 算法）
- **超时预警**：基于路线预估时长 + 实时交通动态判断是否超出容忍时长。  
- **温控预警**：使用 BP 神经网络对温湿度流进行分析，并结合按品类配置温湿度区间。  
- **路径偏离预警**：GPS 坐标与预设路线做空间匹配，超过电子围栏偏离半径阈值触发。  
- **动态规则引擎（核心模块）**：将“超时容忍时长/温控区间/偏离半径”做成可配置规则，支持运营侧快速调整。

### 4. 可视化与地图能力
- 轨迹可视化看板集成 **高德地图 API**；订单状态机与轨迹集成是核心模块之一。

### 5. 部署运维方案
- **容器化**：Docker 封装 Spring Boot 微服务与 Spark 作业。  
- **集群管理**：Kubernetes 负载均衡与自动扩缩容。

### 6. 验证指标（系统验收口径）
- 预警响应延迟 **≤ 3 秒**（1000+ 传感器并发模拟压测）。  
- 数据处理吞吐量 **≥ 5 万条/秒**（Hadoop 集群资源监控验证）。  
- 业务效果：降低货损 **6%–8%**（作为项目目标/评估项）。

---
